---
aliases:
  - 如何让家庭成员一起使用beancount记账？
tags:
  - beancount
draft: false
date: 2024-10-26 10:04:25
updated: 2024-10-26 11:20:40
---

## 背景

由于我自己目前是使用 [[beancount使用记录|beancount]] 来记账，但是想让家人一起参与到记账中，这显然是不可能的。为此我也搜寻了一翻，发现确实没什么好的办法，要么是使用其他人搭架的 beancount 服务来记账，但是家庭账本这种非常敏感的数据，几乎没有人会将其同步到网上记录。

我尝试了使用 ai 来记账，还在 dify 上搭架了一个记账机器人来实现整个记账流程。但我发现用 ai 来记账实在有点大炮打蚊子，效率非常低。

折腾了一圈之后，我突然想明白了，我的目标并不是在线使用 beancount，我只需要把记账的数据能导入 beancount 就好了。

想通了这一点之后，整个思路就很清晰了。记账数据可以通过其他软件来完成，最后把数据导出成一个数据表，再手工转换到 beancount 中就好了。

我没有首先去找移动端记账软件，因为之前看过家人用的一款记账软件，UI 很漂亮，但数据无法导出，这就非常鸡肋了。

我先去 Google sheet 中设计了一张对应到 beancount 的交易记录表，然后让 GPT 帮我把这个表里的数据按照 beancount 的格式生成交易记录。（让 GPT 来做这些事情，真的太轻松了，尤其是 Google sheet 本身就有一个脚本运行的环境，非常方便。）

有了这张表之后，就只需要解决如何把数据填入这张表里就行了。我也想过还是通过之前搭建的记账工作流来直接写入数据，简单的研究了一下发现太复杂了，根本没有必要。

偶然间看到 Google sheet 有一个 appsheet，可以直接生成一个在线的表单来手工录入数据。（顺便说一下句我觉得记账这件事情最好还是不要依赖自动化记录，手动记录更有意义。）

appsheet 完全依赖于 Google sheet 中的数据，如果在 sheet 中定义好了数据格式和公式，在 appsheet 中可以自动的关联在一起，这还是很方便的。尤其是存在科目引用的情况。

但还是一样的问题，Google 的 appsheet 产品设计得很糟糕，首先这里的公式与 Excel 公式完全不一样，这里更类似于数据库的公式，这对我来说实在太难了。其次是各种校验写的很模糊，比如他说需要有一个 id 字段，但他也说不清楚这个 id 字段里的数据是什么，我以为是需要我自己手动写一个生成不重复 id 的公式来做，就像 airtable 和 nation 中一样。在我折腾了一圈发现他的 id 字段真的就是一个字段而已，他可以自己生成随意不重复的 id 数据。

还有就是产品文档写的非常模糊，如果需求很简单，按照文档的做法很容易上手完成。但稍微想改进一些需求，文档就非常难用了。（可能也不是 Google 的问题，应该使这些低代码应用的通病了，简单得 demo 可以做，稍微复杂一点的就很难用了。我觉得这些产品在 GPT 时代就应该被推平。）

不过 appsheet 也不是全是缺点，还是有很多不错的功能。比如他内置了一些图表功能，这些图表对于记账软件来说太有用了。

移动端的应用也很方便，使用体验也很流畅。更让我惊喜的是，appsheet 的网络并没有被墙。（以至于我觉得完全可以在此之上创建一个日记软件。）

最终我在 GPT 的帮助下完成了这个记账表单的搭建，在手机上安装了 appsheet，测试了一下也顺利通过了。

## 具体操作流程

目前我只设计了俩张表，一张日常消费的记录表，还有一张账户间的转账记录表。
日常消费的记录表对应着 beancount 里资产账户和费用账户的交易纪录。这张表的交易流向是单向的，涉及的账户也比固定。

